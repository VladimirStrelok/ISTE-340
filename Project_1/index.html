<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>Project 1</title>
  <link rel="stylesheet" href="css/styles.css">
  <script>
    // variables
    var jsonData, activeDatasetName, activeDataset;
    
    activeDatasetName = 'football';
    
    // functions
    var getData, setUp, createSelect, selectChange;
  
    getData = function(){
      var request, response;
      request = new XMLHttpRequest();
      request.open( "GET", "./data.json", true );
      request.setRequestHeader("Content-type", "application/json");

      request.onreadystatechange = function()
      {
          if( request.readyState == 4 && request.status == 200 )
          {
              jsonData = JSON.parse( request.responseText );
              setUp(activeDatasetName);
          }
      }
      request.send();
    }
    setUp = function(datasetName){
      while(document.forms[0].firstChild){
        document.forms[0].removeChild(document.forms[0].firstChild);
      }
      activeDataset = jsonData[datasetName];
      console.log(activeDataset);
      createSelect(activeDataset);
    }
    createSelect = function(data){
      var element=document.createElement("select");
      var firstChild =  document.createElement("option");
      var firstChildText = document.createTextNode("Choose an Option");
      firstChild.appendChild(firstChildText);
      firstChild.setAttribute("disabled", true)
      firstChild.setAttribute("selected", true)
      element.appendChild(firstChild);
      var keys = Object.keys(data);
      for(var i=0, l=keys.length; i < l; i++){
        var key = keys[i];
        var child = document.createElement('option');
        var text = document.createTextNode(data[key].value);
        child.setAttribute('value',key)
        child.appendChild(text);
        element.appendChild(child);
      }
      element.setAttribute('onchange','selectChange()');
      document.forms[0].appendChild(element);     
    }
    selectChange = function(){
      var currentNode = this.parent.firstChild;
      while(currentNode != this.parent.lastChild)
      {
        console.log(currentNode);
        currentNode = currentNode.nextSibling;
      }
    }
    getData();
  </script>
 </head>
 <body>
  <header>
   <span>Data Sets</span>
   <nav>
    <a onclick="setUp('football'); this.classname='active';">Football</a>
   </nav>
  </header>
  <main>
      <button onclick="setUp(activeDatasetName)">Reset</button>
      <button>Print</button>
      <form>
      </form>
  </main>
 </body>
</html>
